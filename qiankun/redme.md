### qiankun 方案

qiankun 方案是基于 single-spa 的微前端方案。

#### 优势： 
1. 基于 single-spa 封装，提供了更加开箱即用的 API。

2. 技术栈无关，任意技术栈的应用均可 使用/接入，不论是 React/Vue/Angular/JQuery 还是其他等框架。

3. HTML Entry 接入方式，让你接入微应用像使用 iframe 一样简单。

4. 样式隔离，确保微应用之间样式互相不干扰。

5. JS 沙箱，确保微应用之间 全局变量/事件 不冲突 （有些情况性能有不稳定）。

资源预加载，在浏览器空闲时间预加载未打开的微应用资源，加速微应用打开速度

#### 缺点： 
1. 适配成本比较高，工程化、生命周期、静态资源路径、路由等都要做一系列的适配工作；
css 沙箱的原理是重写 HTMLHeadElement.prototype.appendChild 事件，记录子项目运行时新增的 style/link 标签，卸载子项目时移除这些标签。js 沙箱在某些场景下执行性能下降严重；

2. qiankun 实现 window 隔离有三种思路
  快照，加载子应用前记录下 window 的属性，卸载之后恢复到之前的快照
  diff，加载子应用之后记录对 window 属性的增删改，卸载之后恢复回去
  Proxy，创建一个代理对象，每个子应用访问到的都是这个代理对象

3. 无法同时激活多个子应用，也不支持子应用保活， 无法支持 vite 等 esmodule 脚本运行

#### 提供了全局状态管理的机制
主应用里做全局状态的初始化，定义子应用获取全局状态的方法 getGlobalState 和全局状态变化时的处理函数 onGlobalStateChange：